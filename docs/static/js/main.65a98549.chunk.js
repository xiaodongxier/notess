(this["webpackJsonpnotes-viewer"]=this["webpackJsonpnotes-viewer"]||[]).push([[0],{370:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),s=(n(91),n(19)),o=n(50),l=n(428),d=n(427),j=n(426),b=n(435),u=n(434),h=n(430),g=n(58),p=n.n(g),f=n(429),m=n(51),x=n(432),O=n(431),v=n(425),y=n(436),k=n(12),w=(n(92),n(75)),S=n.n(w),I=n(79),R=n.n(I),C=n(78),L=n.n(C),H=n(417),N=n(420),T=n(422),G=n(423),B=n(424),E=n(76),P=n.n(E),U=n(77),F=n.n(U),M=n(421),_=n(6);function z(e){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}function A(e){var t=Object(k.a)(),n=e.indent?e.indent:2,a=e.folder,i=c.a.useState(Array("function"===typeof a.folders?0:a.folders.length).fill(!1)),r=Object(s.a)(i,2),o=r[0],l=r[1];return"function"===typeof a.folders?(a.folders(a,(function(t,n){a.folders=t,a.files=n,l(Array(a.folders.length).fill(!1)),e.onLoad&&e.onLoad(n),e.fresh()})),Object(_.jsx)(H.a,{component:"div",disablePadding:!0,children:Object(_.jsx)(N.a,{button:!0,style:{paddingLeft:t.spacing(n)},children:Object(_.jsx)(M.a,{variant:"text",width:300,height:30})})})):Object(_.jsxs)(H.a,{component:"div",disablePadding:!0,children:[z(a.folders.map((function(c,i){return[Object(_.jsxs)(N.a,{button:!0,onClick:function(){return function(e){l(o.map((function(t,n){return e===n?!t:t})))}(i)},style:{paddingLeft:t.spacing(n)},children:[Object(_.jsx)(T.a,{children:Object(_.jsx)(S.a,{})}),Object(_.jsx)(G.a,{primary:c.name}),o[i]?Object(_.jsx)(P.a,{}):Object(_.jsx)(F.a,{})]},i),Object(_.jsx)(B.a,{in:o[i],timeout:"auto",unmountOnExit:!0,children:Object(_.jsx)(A,{indent:n+4,folder:c,fresh:e.fresh,onClick:e.onClick})},a.folders.length+i)]}))),a.files.map((function(c,i){return Object(_.jsxs)(N.a,{button:!0,onClick:function(){e.onClick(c)},style:{paddingLeft:t.spacing(n)},children:[Object(_.jsx)(T.a,{children:(r=c.name,r.length>=3&&".md"===r.slice(r.length-3,r.length)?Object(_.jsx)(L.a,{}):Object(_.jsx)(R.a,{}))}),Object(_.jsx)(G.a,{primary:c.name})]},2*a.folders.length+i);var r}))]})}var q=window.location.search,D=300,J=Object(v.a)((function(e){return Object(y.a)({root:{display:"flex"},drawer:Object(o.a)({},e.breakpoints.up("sm"),{width:D,flexShrink:0}),appBar:Object(o.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(D,"px)"),marginLeft:D}),menuButton:Object(o.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:D},content:{flexGrow:1,padding:e.spacing(3)},github:{"& > *":{marginRight:e.spacing(2),marginBottom:e.spacing(1)}}})}));function X(e){return e.parent?X(e.parent)+e.name+"/":""}var W={name:"root",parent:null,folders:function e(t,n){var a=Z(),c=[],i=[],r=new XMLHttpRequest,s="";s="gitlab"===a.git?"https://".concat(a.gitlab,"/api/v4/projects/").concat(a.id,"/repository/tree?per_page=1000&ref=master&path=").concat(encodeURI(X(t))):"https://api.github.com/repos/".concat(a.github,"/contents/").concat(encodeURI(X(t))),r.open("GET",s),a.token&&r.setRequestHeader("Authorization","token "+a.token),r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(JSON.parse(r.responseText).forEach((function(n){("gitlab"===a.git?"tree"===n.type:"dir"===n.type)?c.push({name:n.name,parent:t,folders:e,files:[]}):("gitlab"===a.git?"blob"===n.type:"file"===n.type)&&i.push({name:n.name,parent:t})})),n(c,i))},r.send(null)},files:[]},K=n(99),V=n(310)({html:!0,highlight:function(e,t){if(t&&K.getLanguage(t))try{return'<pre class="hljs"><code>'+K.highlight(t,e,!0).value+"</code></pre>"}catch(n){}return'<pre class="hljs"><code>'+V.utils.escapeHtml(e)+"</code></pre>"}}),Q=n(367);function Y(e,t){if(t){var n=Z(),a="",c="";"gitlab"===n.git?(a="https://".concat(n.gitlab,"/api/v4/projects/").concat(n.id,"/repository/files/"),c="/raw?ref=master"):(a="https://raw.githubusercontent.com/".concat(n.github,"/master/"),c="");for(var i,r=/!\[([\u4e00-\u9fa5a-z0-9-_/. ]*)\]\((\.\/)?([\u4e00-\u9fa5a-z0-9-_/. ]*)\)/g,s=0,o="";null!==(i=r.exec(e));)o+=e.slice(s,r.lastIndex-i[0].length),o+="![".concat(i[1],"](").concat(a).concat("gitlab"===n.git?encodeURI(X(t.parent)+i[3]).replace(/\//g,"%2F"):encodeURI(X(t.parent)+i[3])).concat(c,")"),s=r.lastIndex;o+=e.slice(s,e.length),e=o;var l=/<img +src="([\u4e00-\u9fa5a-z0-9-_/. ]*)"([^>]*)>/g;for(s=0,o="";null!==(i=l.exec(e));)o+=e.slice(s,l.lastIndex-i[0].length),o+='<img src="'.concat(a).concat("gitlab"===n.git?encodeURI(X(t.parent)+i[1]).replace(/\//g,"%2F"):encodeURI(X(t.parent)+i[1])).concat(c,'"').concat(i[2],">"),s=l.lastIndex;o+=e.slice(s,e.length),e=o}return e}function Z(){var e={};if(q.length>1)for(var t=q.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");e[a[0]]=a[1]}return"github"!==e.git&&"gitlab"!==e.git&&void 0!==e.git&&(e.git="github"),"gitlab"===e.git?e.gitlab||(e.gitlab="git.nju.edu.cn",e.id="2047"):e.github||(e.github="xiaodongxier/BeijngNotes"),e}function $(){var e=J(),t=Object(k.a)(),n=c.a.useState(!1),i=Object(s.a)(n,2),r=i[0],o=i[1];function g(){o(!r)}function v(e){o(!1);var t=Z(),n="",a="";"gitlab"===t.git?(n="https://".concat(t.gitlab,"/api/v4/projects/").concat(t.id,"/repository/files/"),a="/raw?ref=master"):(n="https://raw.githubusercontent.com/".concat(t.github,"/master/"),a="");var c,i="".concat(n).concat("gitlab"===t.git?encodeURI(X(e.parent)+e.name).replace(/\//g,"%2F"):encodeURI(X(e.parent)+e.name)).concat(a);if(!((c=e.name).length>=3&&".md"===c.slice(c.length-3,c.length)))return console.log(window.location.search),void window.open(i,"_blank");H(e.name),B("# \u52a0\u8f7d\u4e2d...\n\n\u5982\u679c\u60a8\u8bbf\u95ee\u7684\u662f GitHub \u4e0a\u7684\u7b14\u8bb0, \u4e5f\u8bb8\u662f\u56e0\u4e3a\u56fd\u5185\u8bbf\u95ee GitHub \u901f\u5ea6\u4e0d\u4f73, \u53ef\u4ee5\u81ea\u884c\u5bfb\u627e\u65b9\u5f0f\u89e3\u51b3.");var r=new XMLHttpRequest;r.open("GET",i),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(I(e),B(r.responseText)):B("# \u52a0\u8f7d\u5931\u8d25...\n\n\u5982\u679c\u60a8\u8bbf\u95ee\u7684\u662f GitHub \u4e0a\u7684\u7b14\u8bb0, \u4e5f\u8bb8\u662f\u56e0\u4e3a\u56fd\u5185\u8bbf\u95ee GitHub \u901f\u5ea6\u4e0d\u4f73, \u53ef\u4ee5\u81ea\u884c\u5bfb\u627e\u65b9\u5f0f\u89e3\u51b3."))},r.send(null)}var y=Object(a.useState)(null),w=Object(s.a)(y,2),S=w[0],I=w[1],R=Object(a.useState)("\u5c0f\u4e1c\u897f\u513f\u7684\u7b14\u8bb0"),C=Object(s.a)(R,2),L=C[0],H=C[1],N=Object(a.useState)(""),T=Object(s.a)(N,2),G=T[0],B=T[1],E=Object(a.useState)(0),P=Object(s.a)(E,2),U=P[0],F=P[1],M=Object(a.useState)("xiaodongxier/BeijngNotes"),z=Object(s.a)(M,2),q=z[0],D=z[1],K=Object(a.useState)(""),Q=Object(s.a)(K,2),$=Q[0],ee=Q[1],te=Object(a.useState)("git.nju.edu.cn"),ne=Object(s.a)(te,2),ae=(ne[0],ne[1],Object(a.useState)("2047")),ce=Object(s.a)(ae,2),ie=(ce[0],ce[1],Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:e.toolbar,style:{color:"#303030",display:"flex",alignItems:"center",paddingLeft:16},children:[Object(_.jsx)(p.a,{style:{marginRight:30}}),Object(_.jsx)(m.a,{variant:"h6",noWrap:!0,children:"\u76ee\u5f55"})]}),Object(_.jsx)(j.a,{}),Z().git?Object(_.jsx)(A,{folder:W,fresh:function(){return F(U+1)},onClick:v,onLoad:function(e){e.forEach((function(e){"README.md"===e.name&&v(e)}))}}):null]}));return Object(_.jsxs)("div",{className:e.root,children:[Object(_.jsx)(d.a,{}),Object(_.jsx)(l.a,{position:"fixed",className:e.appBar,color:"default",children:Object(_.jsxs)(f.a,{children:[Object(_.jsx)(h.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:g,className:e.menuButton,children:Object(_.jsx)(p.a,{})}),Object(_.jsx)(m.a,{variant:"h6",noWrap:!0,children:L})]})}),Object(_.jsxs)("nav",{className:e.drawer,"aria-label":"mailbox folders",children:[Object(_.jsx)(u.a,{smUp:!0,implementation:"css",children:Object(_.jsx)(b.a,{variant:"temporary",anchor:"rtl"===t.direction?"right":"left",open:r,onClose:g,classes:{paper:e.drawerPaper},ModalProps:{keepMounted:!0},children:ie})}),Object(_.jsx)(u.a,{xsDown:!0,implementation:"css",children:Object(_.jsx)(b.a,{classes:{paper:e.drawerPaper},variant:"permanent",open:!0,children:ie})})]}),Object(_.jsxs)("main",{className:e.content,children:[Object(_.jsx)("div",{className:e.toolbar}),Z().git?Object(_.jsx)("div",{dangerouslySetInnerHTML:{__html:V.render(Y(G,S))}}):Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"\u6211\u7684\u7684\u7b14\u8bb0"}),Object(_.jsx)("h2",{children:Object(_.jsx)("a",{href:"./?git=github",children:"GitHub Notes"})}),Object(_.jsx)("h1",{children:"GitHub Repo"}),Object(_.jsxs)("form",{className:e.github,noValidate:!0,autoComplete:"off",children:[Object(_.jsx)(x.a,{id:"standard-basic",value:q,onChange:function(e){return D(e.target.value)},label:"Repo"}),Object(_.jsx)(x.a,{id:"standard-basic",value:$,onChange:function(e){return ee(e.target.value)},label:"Token"}),Object(_.jsx)(O.a,{variant:"outlined",color:"primary",onClick:function(){window.location.href="".concat(document.location.toString().split("?")[0],"?git=github&github=").concat(q).concat(""===$?"":"&token="+$)},style:{height:50,width:100,fontSize:16},children:"\u6d4f\u89c8"})]}),Object(_.jsx)("p",{children:"GitHub \u5bf9\u4e8e API \u8bbf\u95ee\u6709\u4e00\u5b9a\u7684\u9650\u5236, \u8d85\u8fc7\u6b21\u6570\u4fbf\u9700\u8981 Token \u624d\u80fd\u7ee7\u7eed\u6d4f\u89c8."}),Object(_.jsxs)("p",{children:["\u8be6\u89c1 ",Object(_.jsx)("a",{href:"https://docs.github.com/cn/github/authenticating-to-github/creating-a-personal-access-token",children:"\u521b\u5efa Token"}),"."]})]})]})]})}V.use(Q,{throwOnError:!1,errorColor:"#cc0000"});var ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,437)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(_.jsxs)(c.a.StrictMode,{children:[Object(_.jsx)($,{}),Object(_.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css"}),Object(_.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/atom-one-dark.min.css"}),Object(_.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css",crossOrigin:"anonymous"}),Object(_.jsx)("script",{defer:!0,src:"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js",crossOrigin:"anonymous"}),Object(_.jsx)("script",{defer:!0,src:"https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js",crossOrigin:"anonymous"})]}),document.getElementById("root")),ee()},91:function(e,t,n){},92:function(e,t,n){}},[[370,1,2]]]);
//# sourceMappingURL=main.65a98549.chunk.js.map